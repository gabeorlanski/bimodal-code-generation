train_jid{{ idx}}=$(sbatch --parsable --job-name={{ name }}_finetune {{ train_sbatch }}.sbatch {{ FineTune.path}})
echo "Submitted Train (id=$train_jid{{ idx}})"
echo "scancel $train_jid" << generated_experiments/cancel_jobs.sh
eval_jid{{idx}}=$(sbatch --parsable --job-name={{ name }}_eval \
	--dependency=afterok:$train_jid{{ idx}} eval.sbatch \
	best_models/{{ FineTune.save_name }} validation,test {{ num_return_sequences }} "remove_input_ids=True")
echo "Submitted Eval $eval_jid{{idx}} to run after $1(id=$train_jid{{ idx}})"
echo "scancel $eval_jid" << generated_experiments/cancel_jobs.sh
exec_jid{{idx}}=(sbatch --parseable --job-name='{{ name }}_execute' --dependency=afterok:$eval_jid{{idx}} eval_code.sbatch eval_results/MBPP {{ FineTune.save_name }})

echo "Submitted Eval $exec_jid{{idx}} to run"
echo "scancel $exec_jid{{idx}}" << generated_experiments/cancel_jobs.sh
echo ""